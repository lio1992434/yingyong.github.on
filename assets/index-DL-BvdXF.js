import{r as u,a as ee,S as G,T as te,C as se,P as L,b as F,X as k,F as M,L as K,A as Y,c as re,d as ae,e as P,f as ne,g as oe,R as le}from"./vendor-D4y_9kxj.js";import{h as ie,E as J}from"./pdf-Cmgn8lrA.js";import{G as de,T as f}from"./genai-B6xRKIug.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const x of l.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function d(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=d(n);fetch(n.href,l)}})();var U={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=u,me=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),ge=Object.prototype.hasOwnProperty,ue=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,he={key:!0,ref:!0,__self:!0,__source:!0};function H(t,o,d){var a,n={},l=null,x=null;d!==void 0&&(l=""+d),o.key!==void 0&&(l=""+o.key),o.ref!==void 0&&(x=o.ref);for(a in o)ge.call(o,a)&&!he.hasOwnProperty(a)&&(n[a]=o[a]);if(t&&t.defaultProps)for(a in o=t.defaultProps,o)n[a]===void 0&&(n[a]=o[a]);return{$$typeof:me,type:t,key:l,ref:x,props:n,_owner:ue.current}}D.Fragment=xe;D.jsx=H;D.jsxs=H;U.exports=D;var e=U.exports,O={},$=ee;O.createRoot=$.createRoot,O.hydrateRoot=$.hydrateRoot;const E="chefnote_recipes_v1",z=[{id:"1",title:"经典培根蛋面",description:"一道传统的罗马意面，由鸡蛋、硬奶酪、腌猪肉和黑胡椒制成，口感浓郁。",tags:["意式","面食","晚餐","快手菜"],createdAt:Date.now(),updatedAt:Date.now(),coverImage:"https://picsum.photos/seed/carbonara/800/600",ingredients:[{name:"意大利面",amount:"400",unit:"克"},{name:"猪颊肉 (或培根)",amount:"150",unit:"克"},{name:"佩科里诺干酪",amount:"100",unit:"克"},{name:"鸡蛋",amount:"4",unit:"个"},{name:"黑胡椒",amount:"1",unit:"汤匙"}],steps:[{instruction:"烧一锅水，水开后加入盐，将意大利面煮至劲道 (Al Dente)。"},{instruction:"将猪颊肉（或培根）切丁，煎至酥脆，然后离火备用。"},{instruction:"将鸡蛋和擦碎的干酪混合，加入少许煮面水搅拌均匀。"},{instruction:"将煮好的面条与煎好的肉混合，离火状态下迅速倒入蛋液搅拌，利用余温使蛋液乳化成浓稠酱汁。"}]},{id:"2",title:"牛油果吐司",description:"简单、健康又美味的早餐主食，富含优质脂肪。",tags:["早餐","素食","健康"],createdAt:Date.now()-1e5,updatedAt:Date.now()-1e5,coverImage:"https://picsum.photos/seed/avocado/800/600",ingredients:[{name:"酸种面包",amount:"2",unit:"片"},{name:"成熟牛油果",amount:"1",unit:"个"},{name:"柠檬汁",amount:"1",unit:"茶匙"},{name:"辣椒碎",amount:"1",unit:"撮"}],steps:[{instruction:"将面包烤至金黄酥脆。"},{instruction:"将牛油果去核取出果肉，加入柠檬汁、盐和黑胡椒捣碎成泥。"},{instruction:"将牛油果泥均匀涂抹在吐司上，撒上辣椒碎即可享用。"}]}],T=()=>{try{const t=localStorage.getItem(E);return t?JSON.parse(t):(localStorage.setItem(E,JSON.stringify(z)),z)}catch(t){return console.error("Failed to load recipes",t),[]}},pe=t=>{const o=T(),d=o.findIndex(a=>a.id===t.id);d>=0?o[d]={...t,updatedAt:Date.now()}:o.unshift({...t,createdAt:Date.now(),updatedAt:Date.now()}),localStorage.setItem(E,JSON.stringify(o))},fe=t=>{const o=T().filter(d=>d.id!==t);localStorage.setItem(E,JSON.stringify(o))},be=({recipes:t,onSelect:o,onCreate:d})=>{const[a,n]=u.useState(""),[l,x]=u.useState(null),p=u.useMemo(()=>{const s=new Set;return t.forEach(i=>i.tags.forEach(c=>s.add(c))),Array.from(s).sort()},[t]),b=u.useMemo(()=>t.filter(s=>{const i=s.title.toLowerCase().includes(a.toLowerCase())||s.ingredients.some(g=>g.name.toLowerCase().includes(a.toLowerCase())),c=l?s.tags.includes(l):!0;return i&&c}),[t,a,l]);return e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50/95 backdrop-blur-sm pt-4 pb-2 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"搜索菜谱或食材...",className:"w-full pl-10 pr-4 py-3 rounded-xl border-none shadow-sm bg-white focus:ring-2 focus:ring-orange-500 outline-none transition-all",value:a,onChange:s=>n(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:[e.jsx("button",{onClick:()=>x(null),className:`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${l===null?"bg-orange-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-100"}`,children:"全部"}),p.map(s=>e.jsx("button",{onClick:()=>x(s===l?null:s),className:`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${l===s?"bg-orange-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-100"}`,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(s=>e.jsxs("div",{onClick:()=>o(s),className:"group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden border border-gray-100 flex flex-col",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden bg-gray-200",children:[e.jsx("img",{src:s.coverImage||`https://picsum.photos/seed/${s.id}/800/600`,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-1 group-hover:text-orange-600 transition-colors",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.tags.slice(0,3).map(i=>e.jsxs("span",{className:"inline-flex items-center text-xs px-2 py-1 bg-orange-50 text-orange-700 rounded-md",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),i]},i)),s.tags.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-500 rounded-md",children:["+",s.tags.length-3]})]}),e.jsxs("div",{className:"mt-auto flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(se,{className:"w-3.5 h-3.5 mr-1"}),new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("span",{children:[s.ingredients.length," 项食材"]})]})]})]},s.id)),b.length===0&&e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400",children:[e.jsx(G,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{className:"text-lg",children:"没有找到相关菜谱。"}),e.jsx("button",{onClick:d,className:"mt-4 text-orange-600 font-medium hover:underline",children:"新建一个？"})]})]}),e.jsx("button",{onClick:d,className:"fixed bottom-8 right-8 bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all active:scale-95 z-50 flex items-center justify-center","aria-label":"Add Recipe",children:e.jsx(L,{className:"w-6 h-6"})})]})},ye=({recipe:t,onBack:o,onEdit:d,onDelete:a})=>{const n=u.useRef(null),[l,x]=u.useState(!1),[p,b]=u.useState(!1),s=async i=>{if(n.current){b(!0),await new Promise(c=>setTimeout(c,100));try{const c=n.current,g=await ie(c,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),w=g.toDataURL("image/jpeg",.95),S=g.width,j=g.height;if(i==="single"){const y=new J({orientation:"p",unit:"px",format:[S,j]});y.addImage(w,"JPEG",0,0,S,j),y.save(`${t.title}_长图.pdf`)}else{const y=new J("p","mm","a4"),A=210,N=297,C=j*A/S;let I=C,v=0;for(y.addImage(w,"JPEG",0,v,A,C),I-=N;I>0;)v=I-C,y.addPage(),y.addImage(w,"JPEG",0,v,A,C),I-=N;y.save(`${t.title}_A4打印.pdf`)}x(!1)}catch(c){console.error("Export failed",c),alert("导出失败，请重试。如果图片加载失败可能导致此问题。")}finally{b(!1)}}};return e.jsxs("div",{className:"bg-white min-h-screen pb-20 animate-fade-in relative",children:[l&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-orange-600"}),"导出 PDF 选项"]}),e.jsx("button",{onClick:()=>!p&&x(!1),disabled:p,children:e.jsx(k,{className:"w-5 h-5 text-gray-400 hover:text-gray-600"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"请选择您需要的 PDF 格式："}),e.jsxs("button",{onClick:()=>s("single"),disabled:p,className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-orange-500 hover:bg-orange-50 transition-all group text-left",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 group-hover:text-orange-700",children:"长图 PDF"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"单页完整显示，适合手机/平板阅读分享"})]}),e.jsx(M,{className:"w-5 h-5 text-gray-400 group-hover:text-orange-500"})]}),e.jsxs("button",{onClick:()=>s("multi"),disabled:p,className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-orange-500 hover:bg-orange-50 transition-all group text-left",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800 group-hover:text-orange-700",children:"A4 分页 PDF"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"标准 A4 尺寸分页，适合打印归档"})]}),e.jsx(F,{className:"w-5 h-5 text-gray-400 group-hover:text-orange-500"})]})]}),p&&e.jsxs("div",{className:"absolute inset-0 bg-white/80 flex flex-col items-center justify-center text-orange-600 font-medium z-10",children:[e.jsx(K,{className:"w-8 h-8 animate-spin mb-2"}),"正在生成 PDF..."]})]})}),e.jsxs("div",{ref:n,className:"bg-white",children:[e.jsxs("div",{className:"relative h-72 w-full bg-gray-200 print:h-64",children:[e.jsx("img",{src:t.coverImage||`https://picsum.photos/seed/${t.id}/1200/800`,alt:t.title,className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"}),e.jsx("button",{onClick:o,"data-html2canvas-ignore":"true",className:"absolute top-4 left-4 p-2 bg-black/30 backdrop-blur-md rounded-full text-white hover:bg-black/50 transition-colors",children:e.jsx(Y,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 text-white",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 shadow-sm",children:t.title}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(i=>e.jsx("span",{className:"px-2 py-1 bg-white/20 backdrop-blur-sm rounded-md text-xs font-medium border border-white/10",children:i},i))})]})]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.description&&e.jsxs("p",{className:"text-gray-600 italic text-lg mb-8 leading-relaxed border-l-4 border-orange-500 pl-4",children:['"',t.description,'"']}),e.jsxs("div",{className:"grid md:grid-cols-[1fr_2fr] gap-10",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-8 h-1 bg-orange-500 rounded-full mr-3"}),"食材清单"]}),e.jsx("div",{className:"bg-orange-50/50 rounded-2xl p-6 border border-orange-100",children:e.jsx("ul",{className:"space-y-3",children:t.ingredients.map((i,c)=>e.jsxs("li",{className:"flex justify-between items-center text-gray-700 border-b border-orange-100 pb-2 last:border-0 last:pb-0",children:[e.jsx("span",{className:"font-medium",children:i.name}),e.jsxs("span",{className:"text-gray-500 text-sm whitespace-nowrap ml-4",children:[i.amount," ",e.jsx("small",{children:i.unit})]})]},c))})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-8 h-1 bg-orange-500 rounded-full mr-3"}),"烹饪步骤"]}),e.jsx("div",{className:"space-y-8",children:t.steps.map((i,c)=>e.jsxs("div",{className:"relative pl-8 border-l-2 border-gray-200 break-inside-avoid",children:[e.jsx("div",{className:"absolute -left-[9px] top-0 bg-white border-2 border-orange-500 text-orange-600 w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold"}),e.jsxs("div",{className:"mb-1 text-sm font-bold text-orange-600 uppercase tracking-wider",children:["步骤 ",c+1]}),e.jsx("p",{className:"text-gray-700 leading-relaxed text-lg",children:i.instruction}),i.image&&e.jsx("img",{src:i.image,alt:`Step ${c+1}`,className:"mt-4 rounded-xl shadow-md max-h-60 object-cover w-full",crossOrigin:"anonymous"})]},c))})]})]}),e.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-100 text-center text-gray-400 text-sm",children:["Generated by ChefNote • ",new Date().toLocaleDateString()]})]})]}),e.jsxs("div",{"data-html2canvas-ignore":"true",className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md shadow-2xl border border-gray-200 rounded-full px-6 py-3 flex gap-4 items-center z-50",children:[e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 text-gray-700 hover:text-orange-600 font-medium transition-colors px-2",title:"导出 PDF",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"导出 PDF"})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsxs("button",{onClick:()=>d(t),className:"flex items-center gap-2 text-gray-700 hover:text-blue-600 font-medium transition-colors px-2",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"编辑"})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsx("button",{onClick:()=>{confirm("确定要删除这个菜谱吗？")&&a(t.id)},className:"flex items-center gap-2 text-gray-700 hover:text-red-600 font-medium transition-colors px-2",children:e.jsx(ae,{className:"w-5 h-5"})})]})]})};var je={};const Ne=()=>je.API_KEY||"",ve=async t=>{const o=Ne();if(!o)return console.warn("No API Key found"),null;const d=new de({apiKey:o});try{const a=await d.models.generateContent({model:"gemini-2.5-flash",contents:`Create a detailed recipe in Simplified Chinese (简体中文) based on this idea: "${t}". 
                 Ensure it has a catchy title, appropriate tags, list of ingredients, and clear steps.`,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{title:{type:f.STRING},description:{type:f.STRING},tags:{type:f.ARRAY,items:{type:f.STRING}},ingredients:{type:f.ARRAY,items:{type:f.OBJECT,properties:{name:{type:f.STRING},amount:{type:f.STRING},unit:{type:f.STRING}}}},steps:{type:f.ARRAY,items:{type:f.OBJECT,properties:{instruction:{type:f.STRING}}}}},required:["title","ingredients","steps"]}}});if(a.text)return JSON.parse(a.text)}catch(a){console.error("Gemini Generation Error:",a)}return null},R={name:"",amount:"",unit:""},B={instruction:"",image:""},we=({initialRecipe:t,onSave:o,onCancel:d})=>{const[a,n]=u.useState((t==null?void 0:t.title)||""),[l,x]=u.useState((t==null?void 0:t.description)||""),[p,b]=u.useState((t==null?void 0:t.tags.join(", "))||""),[s,i]=u.useState((t==null?void 0:t.ingredients)||[{...R}]),[c,g]=u.useState((t==null?void 0:t.steps)||[{...B}]),[w,S]=u.useState(!1),[j,y]=u.useState(""),[A,N]=u.useState(!1),C=()=>i([...s,{...R}]),I=r=>i(s.filter((m,h)=>h!==r)),v=(r,m,h)=>{const _=[...s];_[r]={..._[r],[m]:h},i(_)},W=()=>g([...c,{...B}]),V=r=>g(c.filter((m,h)=>h!==r)),X=(r,m)=>{const h=[...c];h[r]={...h[r],instruction:m},g(h)},Q=()=>{if(!a)return alert("请输入菜谱名称");const r={id:(t==null?void 0:t.id)||crypto.randomUUID(),title:a,description:l,tags:p.split(",").map(m=>m.trim()).filter(Boolean),ingredients:s.filter(m=>m.name),steps:c.filter(m=>m.instruction),createdAt:(t==null?void 0:t.createdAt)||Date.now(),updatedAt:Date.now(),coverImage:t==null?void 0:t.coverImage};o(r)},Z=async()=>{if(!j)return;S(!0);const r=await ve(j);S(!1),N(!1),r?(r.title&&n(r.title),r.description&&x(r.description),r.tags&&b(r.tags.join(", ")),r.ingredients&&i(r.ingredients),r.steps&&g(r.steps)):alert("生成失败，请重试。")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"sticky top-0 z-20 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Y,{className:"w-5 h-5 text-gray-600"})}),e.jsx("h1",{className:"text-lg font-bold text-gray-800",children:t?"编辑菜谱":"新建菜谱"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!t&&e.jsxs("button",{onClick:()=>N(!0),className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium hover:bg-indigo-100 transition-colors mr-2",children:[e.jsx(P,{className:"w-4 h-4"}),"AI 大厨"]}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-700 transition-colors shadow-sm",children:[e.jsx(ne,{className:"w-4 h-4"}),"保存"]})]})]}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-4",children:[!t&&e.jsxs("button",{onClick:()=>N(!0),className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium hover:bg-indigo-100 transition-colors mb-4 border border-indigo-100 dashed",children:[e.jsx(P,{className:"w-4 h-4"}),"AI 智能填充"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"菜谱名称"}),e.jsx("input",{value:a,onChange:r=>n(r.target.value),placeholder:"例如：红烧肉",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"简介"}),e.jsx("textarea",{value:l,onChange:r=>x(r.target.value),placeholder:"关于这道菜的故事...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none h-24 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"标签（用逗号分隔）"}),e.jsx("input",{value:p,onChange:r=>b(r.target.value),placeholder:"家常菜, 辣, 简单",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"食材清单"}),e.jsx("div",{className:"space-y-3",children:s.map((r,m)=>e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("input",{value:r.name,onChange:h=>v(m,"name",h.target.value),placeholder:"名称",className:"flex-[2] px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-orange-500 outline-none"}),e.jsx("input",{value:r.amount,onChange:h=>v(m,"amount",h.target.value),placeholder:"数量",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-orange-500 outline-none"}),e.jsx("input",{value:r.unit,onChange:h=>v(m,"unit",h.target.value),placeholder:"单位",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-orange-500 outline-none"}),e.jsx("button",{onClick:()=>I(m),className:"p-2 text-gray-400 hover:text-red-500",children:e.jsx(k,{className:"w-5 h-5"})})]},m))}),e.jsxs("button",{onClick:C,className:"mt-4 flex items-center text-sm text-orange-600 font-medium hover:text-orange-700",children:[e.jsx(L,{className:"w-4 h-4 mr-1"})," 添加食材"]})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"烹饪步骤"}),e.jsx("div",{className:"space-y-6",children:c.map((r,m)=>e.jsxs("div",{className:"relative pl-8 border-l-2 border-gray-200",children:[e.jsx("div",{className:"absolute -left-[9px] top-2 bg-gray-100 border-2 border-gray-300 text-gray-500 w-4 h-4 rounded-full flex items-center justify-center text-[10px] font-bold",children:m+1}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("textarea",{value:r.instruction,onChange:h=>X(m,h.target.value),placeholder:`步骤 ${m+1} 描述...`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-orange-500 outline-none h-20 resize-none"}),e.jsx("button",{onClick:()=>V(m),className:"p-2 text-gray-400 hover:text-red-500",children:e.jsx(k,{className:"w-5 h-5"})})]})]},m))}),e.jsxs("button",{onClick:W,className:"mt-4 flex items-center text-sm text-orange-600 font-medium hover:text-orange-700",children:[e.jsx(L,{className:"w-4 h-4 mr-1"})," 添加步骤"]})]})]}),A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-indigo-700",children:[e.jsx(P,{className:"w-5 h-5"})," AI 厨师助手"]}),e.jsx("button",{onClick:()=>N(!1),children:e.jsx(k,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"输入菜名（例如“宫保鸡丁”）或粘贴食材列表，我来为您生成完整菜谱。"}),e.jsx("textarea",{value:j,onChange:r=>y(r.target.value),placeholder:"描述你想做什么...",className:"w-full border border-gray-300 rounded-xl p-3 h-32 mb-4 focus:ring-2 focus:ring-indigo-500 outline-none"}),e.jsx("button",{onClick:Z,disabled:w||!j.trim(),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 disabled:opacity-50 flex justify-center items-center",children:w?e.jsx(K,{className:"w-5 h-5 animate-spin"}):"生成菜谱"})]})})]})},Se=()=>{const[t,o]=u.useState([]),[d,a]=u.useState("LIST"),[n,l]=u.useState(null);u.useEffect(()=>{const g=T();o(g)},[]);const x=()=>{a("LIST"),l(null),o(T())},p=g=>{l(g),a("DETAIL")},b=()=>{l(null),a("CREATE")},s=g=>{l(g),a("EDIT")},i=g=>{pe(g),d==="EDIT"?(l(g),a("DETAIL")):x()},c=g=>{fe(g),x()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 font-sans selection:bg-orange-100 selection:text-orange-900",children:[d==="LIST"&&e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-orange-600 p-2 rounded-lg",children:e.jsx(oe,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold tracking-tight text-gray-900",children:"ChefNote 厨记"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[d==="LIST"&&e.jsx(be,{recipes:t,onSelect:p,onCreate:b}),d==="DETAIL"&&n&&e.jsx("div",{className:"-mx-4 sm:-mx-6 lg:-mx-8 -mt-6",children:e.jsx(ye,{recipe:n,onBack:x,onEdit:s,onDelete:c})}),(d==="CREATE"||d==="EDIT")&&e.jsx("div",{className:"-mx-4 sm:-mx-6 lg:-mx-8 -mt-6",children:e.jsx(we,{initialRecipe:n,onSave:i,onCancel:n?()=>p(n):x})})]})]})},q=document.getElementById("root");if(!q)throw new Error("Could not find root element to mount to");const Ce=O.createRoot(q);Ce.render(e.jsx(le.StrictMode,{children:e.jsx(Se,{})}));
